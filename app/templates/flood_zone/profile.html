{% extends "layout.html" %}

{% block head %}
{{ super() }}
<!-- Import del leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin="" />
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
<!--  -->


<!-- Import del leaflet draw -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"
    integrity="sha512-ozq8xQKq6urvuU6jNgkfqAmT7jKN2XumbrX1JiB3TnF7tI48DPI4Gy1GXKD/V3EExgAs1V+pRO7vwtS1LHg0Gw=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw-src.css"
    integrity="sha512-vJfMKRRm4c4UupyPwGUZI8U651mSzbmmPgR3sdE3LcwBPsdGeARvUM5EcSTg34DK8YIRiIo+oJwNfZPMKEQyug=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock %}


{% block content %}


<div class="row mt-5">
    <div class="col-6 justify-content-center">
        <span>
            <h2> Nombre de la zona: {{ flood_zone.name}}</h2>
        </span>
        <span>
            <h4>Codigo: {{flood_zone.cod_zone}} </h4>
        </span>
        <span>
            <h4> Estado: {% if flood_zone.state %}
                    Publicado
                 {% else %}
                    Despublicado
                 {% endif %} </h4>
        </span>
        <span>
            <h4>Color asignado: {{flood_zone.colour}} </h4>
        </span>
    </div>
    <div class="col-6">
        <div id="map" style="height: 360px;"></div>
    </div>
</div>

<a href="{{url_for('flood_zone_index')}}" class="btn btn-secondary"> Volver </a>
<script>
    coordenadas = {{ flood_zone.get_as_json() | safe }};
    color_map = "{{flood_zone.get_color_traduced() }}";
    function ZoneMap() {
        var mymap = L.map('map').setView(coordenadas[Math.trunc(coordenadas.length/3)], 12);
        // var mymap = L.map('map').setView(coordenadas[0], 13);
        console.log(coordenadas[75]);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
            maxZoom: 18,
            id: 'mapbox/streets-v11',
            tileSize: 512,
            zoomOffset: -1,
            accessToken: 'your.mapbox.access.token'
        }).addTo(mymap);
        var polygon = L.polygon(coordenadas, { 
            color:color_map
        }).addTo(mymap);
        // var polygon2 = L.polygon([[-34.79135898963996,-57.99674526817398],[-34.794109949219944,-57.99940601951677],[-34.79506218307646,-57.998633543320466],[-34.79545012705044,-57.999019781418625],[-34.79612020779706,-57.99816147453386],[-34.79661394802041,-57.99773232109146],[-34.79689608396338,-57.997646490403],[-34.79746035295291,-57.99768940574724],[-34.79857275728035,-57.997903982468415],[-34.79913701479441,-57.9982043898781],[-34.79994812820487,-57.998504797287765],[-34.80058290704624,-57.99876228935318],[-34.80146453621718,-57.99884812004167],[-34.80192297965971,-57.99867645866472],[-34.80245194969448,-57.99859062797623],[-34.80333355887586,-57.997517744370285],[-34.803897783803485,-57.99653069145279],[-34.80453253223047,-57.99588696128923],[-34.80502622207201,-57.994942823715974],[-34.80551990895647,-57.994427839585114],[-34.8063662224501,-57.9936124480446],[-34.806754113230355,-57.99271122581558],[-34.80721252725343,-57.99198166496353],[-34.80774146334242,-57.99133793479997],[-34.80788251239282,-57.991037527390304],[-34.80848196816388,-57.990393797226716],[-34.808658277854974,-57.98987881309586],[-34.80908141957462,-57.98944965965349],[-34.80938106508966,-57.98889584111749],[-34.80976894168036,-57.98820919560968],[-34.810297861361875,-57.98739380406915],[-34.81079151666842,-57.98662132787286],[-34.81100308232309,-57.98593468236505],[-34.811355690540466,-57.98559135961114],[-34.811849339509955,-57.98481888341485],[-34.812131423307605,-57.98421806859552],[-34.81237824583838,-57.98370308446465],[-34.812766108321604,-57.98297352361261],[-34.813436048310514,-57.98220104741632],[-34.81403546368346,-57.98138565587579],[-34.814458577791854,-57.98048443364679],[-34.81459961534514,-57.97984070348321],[-34.81484643048249,-57.978553243156064],[-34.81516376314405,-57.97765202092706],[-34.815481094583454,-57.976793714042294],[-34.816468340134186,-57.97567791509209],[-34.8175260900966,-57.974218793388],[-34.818654341754396,-57.97224468755304],[-34.8193947485074,-57.97121471929132],[-34.820381947159746,-57.96984142827569],[-34.82084540473349,-57.9693637698074],[-34.82155053541754,-57.96889170102078],[-34.8220441233049,-57.968548378266874],[-34.822855011270285,-57.967990478791776],[-34.82380691304352,-57.96773298672635],[-34.824547273483674,-57.96734674862819],[-34.825040843413184,-57.966745933808866],[-34.82585170187614,-57.96593054226834],[-34.826697806543486,-57.96485765866238],[-34.82726187149251,-57.96417101315457],[-34.8276849176689,-57.96339853695828],[-34.828072708088214,-57.962754806794706],[-34.82870727029,-57.96172483853299],[-34.82920081528863,-57.96073778561549],[-34.82962385150453,-57.960179886140395],[-34.83008213828605,-57.959536155976835],[-34.83043466484394,-57.958763679780546],[-34.83068143253647,-57.95786245755154],[-34.83096345185101,-57.95713289669949],[-34.831238761430875,-57.956452231155716],[-34.83173229125697,-57.954478125320755],[-34.83236682525826,-57.95357690309175],[-34.83303660584355,-57.95327649568208],[-34.83345962235335,-57.95293317292818],[-34.83423514697665,-57.95246110414156],[-34.83476390957708,-57.95228944276461],[-34.83557467230209,-57.9519461200107],[-34.8364206770679,-57.9516027972568],[-34.836773176487824,-57.94984326814303],[-34.83737242203775,-57.94782624696382],[-34.83758391942571,-57.94503674958833],[-34.838042161902216,-57.94091687654146],[-34.838253657569524,-57.93915734742769],[-34.838500401827964,-57.93756947969087],[-34.83846515269346,-57.93542371247896],[-34.83811266051837,-57.933750014053665],[-34.83765441843428,-57.93276296113619],[-34.837055174937035,-57.93160424684175],[-34.835609922674216,-57.93113217805513],[-34.8341293940491,-57.93130383943208],[-34.83314236017474,-57.931732992874466],[-34.832578335505374,-57.93203340028413],[-34.832543083835276,-57.932977537857376],[-34.832578335505374,-57.93439374421724],[-34.832578335505374,-57.93688283418306],[-34.83236682525826,-57.938985686050735],[-34.83208481075027,-57.940745215164505],[-34.83180279527637,-57.941646437393516],[-34.83134451807119,-57.9440926120151],[-34.83106250006179,-57.94507966493257],[-34.8307804810865,-57.94576631044038],[-34.82989916556324,-57.94671044801363],[-34.829793407066575,-57.94782624696382],[-34.82961714260365,-57.94958577607759],[-34.82947613076166,-57.95035825227389],[-34.82929986561961,-57.95134530519136],[-34.8289473342036,-57.95246110414156],[-34.828401406720666,-57.95365919766483],[-34.82808412505253,-57.95477499661503],[-34.82752006573535,-57.95580496487674],[-34.82667396951571,-57.95713534054813],[-34.82536955414656,-57.959195277071565],[-34.824664456155965,-57.960353991366006],[-34.82392409676916,-57.96134104428348],[-34.82272681932116,-57.962696192407755],[-34.82128131556485,-57.964241144800326],[-34.82057618257621,-57.964970705652384],[-34.81976527217724,-57.96638691201225],[-34.818954353795704,-57.96763145699516],[-34.81761455811106,-57.96883308663383],[-34.81652155075639,-57.97029220833793],[-34.8159926710241,-57.97127926125541],[-34.815111197259064,-57.97256672158256],[-34.81479386439503,-57.9735108591558],[-34.81387711814454,-57.97402584328666],[-34.81352452071683,-57.97449791207328],[-34.81292510162688,-57.97501289620414],[-34.81204359504363,-57.97531330361381],[-34.81081236033438,-57.97655882299296],[-34.810036615149684,-57.977760452631635],[-34.80894350726738,-57.979262489679975],[-34.80827353075341,-57.98012079656474],[-34.807321449495724,-57.981794494990034],[-34.806827773402354,-57.98243822515361],[-34.80668672254681,-57.98329653203837],[-34.80622830559917,-57.983725685480756],[-34.804324084831535,-57.98505606115214],[-34.80319563695034,-57.98569979131572],[-34.8018203202076,-57.9861289447581],[-34.80129134611957,-57.98660101354472],[-34.8006552802024,-57.98735011994723],[-34.80005576750672,-57.988508834241664],[-34.79885672903581,-57.98992504060153],[-34.79804560488726,-57.99108375489596],[-34.79705813863094,-57.992242469190394],[-34.79585905656241,-57.993229522107875],[-34.79469522493681,-57.99421657502535],[-34.793707718553655,-57.994946135877406],[-34.79254385656208,-57.99580444276217],[-34.791873746751456,-57.99627651154879]]).addTo(mymap);
        
    }
    mp = ZoneMap()
    
</script>


{% endblock %}